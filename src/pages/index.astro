---
import Layout from '../layouts/Layout.astro';
import ProjectCard from '../components/ProjectCard.astro';
import { Image } from 'astro:assets';
import about from '../content/about.json';
import contact from '../content/contact.json';
import headshotImage from '../assets/headshot.png';
import { getProjects } from '../utils/projects.js';

const projects = await getProjects(3);
---

<Layout title="David Brackbill">
  <!-- Hero Section -->
  <section class="hero">
    <div class="mb-8">
      <a href={contact.linkedinUrl} target="_blank" rel="noopener noreferrer">
        <Image 
          src={headshotImage}
          alt="David" 
          class="hero-image"
          width={250}
          height={250}
          format="webp"
          quality={100}
        />
      </a>
      <h1 class="hero-title">
        Hi, I'm David
      </h1>
      <p class="hero-subtitle">
        {about.blurb}
      </p>
    </div>
    <div class="hero-actions">
      <a 
        href="/projects" 
        class="btn btn-primary"
      >
        View My Work
      </a>
    </div>
  </section>

  <!-- About Section -->
  <section class="section-compact">
    <div class="container">
      <h2 class="section-title">About Me</h2>
      <div class="prose">
        {about.about.split('\n').map((paragraph) => (
        <p>{paragraph}</p>
        ))}
      </div>
    </div>
  </section>

  <!-- Projects Section -->
  <section class="section-compact">
    <div class="container">
      <h2 class="section-title">Featured Projects</h2>
      <div class="grid grid-cols-2 gap-8">
        {projects.map((project) => (
          <ProjectCard project={project} showDescription={true} />
        ))}
      </div>
      <div class="text-center mt-8">
        <a 
          href="/projects" 
          class="btn btn-primary"
        >
          View All Projects
        </a>
      </div>
    </div>
  </section>
</Layout>
